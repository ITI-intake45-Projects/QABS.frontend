<div class="flex justify-center max-h-screen pb-10"> 


  <div class="w-full max-w-3xl h-screen overflow-auto bg-[var(--background-primary)] shadow-2xl rounded-2xl border-2 border-[var(--gold-primary)] p-8 relative space-y-8">
    
    <!-- Header -->
    <div>
      <h1 class="text-2xl font-bold text-[var(--green-dark)] text-center flex items-center justify-center gap-2">
        <i class="fa-solid fa-user text-[var(--gold-primary)]"></i>
        إنشاء حساب جديد
      </h1>
      <p class="text-[var(--text-secondary)] text-center mt-2">
        لديك حساب بالفعل؟
        <a class="text-[var(--gold-primary)] hover:text-[var(--gold-secondary)] font-medium cursor-pointer">
          سجّل دخولك
        </a>
      </p>
    </div>

    <!-- FORM -->
    <form [formGroup]="userRegisterForm" (ngSubmit)="onSubmit()" class="space-y-6">
      
      <!-- First + Last Name -->
      <div class="grid md:grid-cols-2 md:gap-4">
        <!-- First Name -->
        <div class="relative w-full">
          <label for="first_name" class="block text-sm font-medium text-[var(--text-primary)] mb-1">الاسم الأول<span class="text-red-500">*</span></label>
          <input type="text" id="first_name" formControlName="FirstName" class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--gold-primary)] focus:border-[var(--gold-primary)]" />
          <div *ngIf="formControls['FirstName'].touched && formControls['FirstName'].invalid" class="text-red-600 text-sm mt-1">
            <span *ngIf="formControls['FirstName'].errors?.['required']">الاسم الأول مطلوب</span>
          </div>
        </div>

        <!-- Last Name -->
        <div class="relative w-full">
          <label for="last_name" class="block text-sm font-medium text-[var(--text-primary)] mb-1">الاسم الأخير<span class="text-red-500">*</span></label>
          <input type="text" id="last_name" formControlName="LastName" class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--gold-primary)] focus:border-[var(--gold-primary)]" />
          <div *ngIf="formControls['LastName'].touched && formControls['LastName'].invalid" class="text-red-600 text-sm mt-1">
            <span *ngIf="formControls['LastName'].errors?.['required']">الاسم الأخير مطلوب</span>
          </div>
        </div>
      </div>

      <!-- Email -->
      <div>
        <label for="email" class="block text-sm font-medium text-[var(--text-primary)] mb-1">البريد الإلكتروني<span class="text-red-500">*</span></label>
        <input type="email" id="email" formControlName="Email" class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--gold-primary)] focus:border-[var(--gold-primary)]" />
      </div>

      <!-- Password -->
      <div>
        <label for="password" class="block text-sm font-medium text-[var(--text-primary)] mb-1">كلمة المرور<span class="text-red-500">*</span></label>
        <input type="password" id="password" formControlName="Password" class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--gold-primary)] focus:border-[var(--gold-primary)]" />
      </div>

      <!-- Gender / Age / HourlyRate -->
      <div class="grid md:grid-cols-3 md:gap-4">
        <!-- Gender -->
        <div>
          <label class="block text-sm font-medium text-[var(--text-primary)] mb-1">النوع<span class="text-red-500">*</span></label>
          <input type="text" readonly [value]="selectedGenderLabel" (click)="toggleDropdown()" class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--gold-primary)] focus:border-[var(--gold-primary)] cursor-pointer" />
          <div *ngIf="dropdownOpen" class="absolute mt-1 bg-white w-full rounded-lg shadow-md z-20">
            <label *ngFor="let g of genders" class="flex items-center px-4 py-2 cursor-pointer hover:bg-gray-100">
              <input type="radio" [value]="g.id" (change)="selectGender(g.id)" [checked]="formControls['Gender'].value === g.id" />
              <span class="ml-2">{{ g.label }}</span>
            </label>
          </div>
        </div>

        <!-- Age -->
        <div>
          <label for="age" class="block text-sm font-medium text-[var(--text-primary)] mb-1">العمر<span class="text-red-500">*</span></label>
          <input type="number" id="age" formControlName="Age" class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--gold-primary)] focus:border-[var(--gold-primary)]" />
        </div>

        <!-- HourlyRate -->
        <div>
          <label class="block text-sm font-medium text-[var(--text-primary)] mb-1">تكلفة الساعة<span class="text-red-500">*</span></label>
          <input type="number" formControlName="HourlyRate" class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--gold-primary)] focus:border-[var(--gold-primary)]" />
        </div>
      </div>

      <!-- Specialization -->
      <div class="relative">
        <div class="w-full px-4 py-2 border border-[var(--gray-medium)] rounded-lg shadow-sm cursor-pointer" (click)="toggleDropdownSpecialization()">
          <span *ngIf="selectedSpecializations.length === 0" class="text-gray-400">اختر التخصص</span>
          <span *ngIf="selectedSpecializations.length > 0">{{ selectedSpecializationsLabels }}</span>
        </div>
        <div *ngIf="dropdownSpecializationOpen" class="absolute mt-1 bg-white w-full rounded-lg shadow-md z-20">
          <label *ngFor="let s of specializations" class="flex items-center px-4 py-2 cursor-pointer hover:bg-gray-100">
            <input type="checkbox" [value]="s.id" (change)="onSpecializationChange($event)" [checked]="isSpecializationSelected(s.id)" />
            <span class="ml-2">{{ s.label }}</span>
          </label>
        </div>
      </div>

      <!-- File Upload -->
      <div>
        <label class="block text-sm font-medium mb-2">حمل صورة</label>
        <input formControlName="ImageFile" type="file" (change)="onFileChange($event)" class="block w-full text-sm border border-gray-300 rounded-lg cursor-pointer bg-gray-50" />
        <p class="text-sm text-gray-500 mt-1">SVG, PNG, JPG or GIF (MAX. 800x400px).</p>
      </div>

      <!-- Submit -->
      <button type="submit" [disabled]="isLoading" class="w-full h-12 bg-[var(--green-darker)] hover:bg-[var(--green-primary)] text-white font-semibold rounded-lg shadow-md flex items-center justify-center gap-2">
        <ng-container *ngIf="!isLoading">تسجيل</ng-container>
        <ng-container *ngIf="isLoading">
          <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
          </svg>
          <span>جاري التحميل...</span>
        </ng-container>
      </button>

    </form>

    
  </div>


</div>
